# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/monitoring.coreos.com/scrapeconfig_v1alpha1.json
---
apiVersion: monitoring.coreos.com/v1alpha1
kind: ScrapeConfig
metadata:
  name: zfs-exporter
spec:
  staticConfigs:
    - targets:
        - "10.1.10.10:9134"
  metricsPath: /metrics
  scheme: HTTP
  relabelings:
    - targetLabel: instance # remove port from instance
      action: replace
      sourceLabels: [__address__]
      regex: (.*):\d*
  metricRelabelings:
    - action: drop
      sourceLabels: [__name__]
      regex: promhttp_.*
