---
services:
  app:
    container_name: doco-cd
    environment:
      HTTP_PORT: 8080
      LOG_LEVEL: info
      TZ: Europe/London
    env_file:
      - ./secrets.enc.env
    healthcheck:
      interval: 30s
      retries: 3
      start_period: 15s
      test:
        - CMD
        - wget
        - "--no-verbose"
        - "--tries=1"
        - "--spider"
        - http://localhost:8080/v1/health
      timeout: 5s
    image: ghcr.io/kimdre/doco-cd:0.42.1
    ports:
      - "8080:8080"
    restart: unless-stopped
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - /opt/docker/docu-cd/data:/data
volumes:
  data: {}
